{"ast":null,"code":"import _objectSpread from\"D:/Chaituu/social_platform/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{motion,AnimatePresence}from'framer-motion';import Login from'./Login';import UserSearch from'./UserSearch';import Chat from'./Chat';import FriendsList from'./FriendsList';import api from'./api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[authUser,setAuthUser]=useState(localStorage.getItem('username'));const[activeChat,setActiveChat]=useState(null);const[onlineUsers,setOnlineUsers]=useState({});useEffect(()=>{if(!authUser)return;const statusSocket=new WebSocket(\"ws://localhost:8000/ws/status/\".concat(authUser,\"/\"));statusSocket.onmessage=e=>{const data=JSON.parse(e.data);setOnlineUsers(prev=>_objectSpread(_objectSpread({},prev),{},{[data.user]:data.status}));};return()=>statusSocket.close();},[authUser]);if(!authUser)return/*#__PURE__*/_jsx(Login,{setAuthUser:setAuthUser});return/*#__PURE__*/_jsxs(\"div\",{style:styles.dashboard,children:[/*#__PURE__*/_jsxs(motion.nav,{initial:{x:-80},animate:{x:0},style:styles.navRail,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.logoBox,children:\"S\"}),/*#__PURE__*/_jsxs(\"div\",{style:styles.navLinks,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.activeIcon,children:\"\\uD83D\\uDCAC\"}),/*#__PURE__*/_jsx(\"div\",{style:styles.icon,children:\"\\uD83D\\uDC65\"}),/*#__PURE__*/_jsx(\"div\",{style:styles.icon,children:\"\\uD83D\\uDD14\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{localStorage.clear();window.location.reload();},style:styles.logoutBtn,children:\"Power\"})]}),/*#__PURE__*/_jsxs(motion.aside,{initial:{opacity:0},animate:{opacity:1},style:styles.sidebar,children:[/*#__PURE__*/_jsxs(\"header\",{style:styles.sideHeader,children:[/*#__PURE__*/_jsx(\"h2\",{style:styles.title,children:\"Messages\"}),/*#__PURE__*/_jsx(UserSearch,{onSelectUser:setActiveChat})]}),/*#__PURE__*/_jsx(\"div\",{style:styles.friendsContainer,children:/*#__PURE__*/_jsx(FriendsList,{onSelectUser:setActiveChat,onlineUsers:onlineUsers})})]}),/*#__PURE__*/_jsx(\"main\",{style:styles.mainView,children:/*#__PURE__*/_jsx(AnimatePresence,{mode:\"wait\",children:activeChat?/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:0.95},transition:{type:\"spring\",stiffness:300,damping:30},style:{height:'100%'},children:/*#__PURE__*/_jsx(Chat,{receiverId:activeChat.id,receiverName:activeChat.username})},activeChat.id):/*#__PURE__*/_jsxs(\"div\",{style:styles.emptyState,children:[/*#__PURE__*/_jsx(motion.div,{animate:{y:[0,-10,0]},transition:{repeat:Infinity,duration:4},style:styles.emptyIcon,children:\"\\u2728\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Pick up where you left off\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Select a friend to open a secure encrypted channel.\"})]})})})]});}const styles={dashboard:{display:'flex',height:'100vh',width:'100vw'},navRail:{width:'80px',background:'var(--bg-surface)',borderRight:'1px solid var(--bg-accent)',display:'flex',flexDirection:'column',alignItems:'center',padding:'25px 0'},logoBox:{width:'45px',height:'45px',background:'var(--primary)',borderRadius:'14px',display:'flex',alignItems:'center',justifyContent:'center',fontWeight:'bold',boxShadow:'0 0 20px var(--primary-glow)',marginBottom:'50px'},navLinks:{flex:1,display:'flex',flexDirection:'column',gap:'30px'},activeIcon:{fontSize:'24px',background:'var(--bg-accent)',padding:'12px',borderRadius:'15px'},icon:{fontSize:'24px',opacity:0.5,cursor:'pointer'},sidebar:{width:'360px',background:'var(--bg-deep)',borderRight:'1px solid var(--bg-accent)',display:'flex',flexDirection:'column'},sideHeader:{padding:'30px 25px'},title:{fontSize:'28px',fontWeight:'700',marginBottom:'20px'},friendsContainer:{flex:1,overflowY:'auto',padding:'0 15px'},mainView:{flex:1,position:'relative',background:'var(--bg-surface)'},emptyState:{height:'100%',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',textAlign:'center',color:'var(--text-muted)'},emptyIcon:{fontSize:'60px',marginBottom:'20px'},logoutBtn:{border:'none',background:'none',color:'#ef4444',fontWeight:'bold',cursor:'pointer'}};export default App;","map":{"version":3,"names":["React","useState","useEffect","motion","AnimatePresence","Login","UserSearch","Chat","FriendsList","api","jsx","_jsx","jsxs","_jsxs","App","authUser","setAuthUser","localStorage","getItem","activeChat","setActiveChat","onlineUsers","setOnlineUsers","statusSocket","WebSocket","concat","onmessage","e","data","JSON","parse","prev","_objectSpread","user","status","close","style","styles","dashboard","children","nav","initial","x","animate","navRail","logoBox","navLinks","activeIcon","icon","onClick","clear","window","location","reload","logoutBtn","aside","opacity","sidebar","sideHeader","title","onSelectUser","friendsContainer","mainView","mode","div","y","exit","scale","transition","type","stiffness","damping","height","receiverId","id","receiverName","username","emptyState","repeat","Infinity","duration","emptyIcon","display","width","background","borderRight","flexDirection","alignItems","padding","borderRadius","justifyContent","fontWeight","boxShadow","marginBottom","flex","gap","fontSize","cursor","overflowY","position","textAlign","color","border"],"sources":["D:/Chaituu/social_platform/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport Login from './Login';\nimport UserSearch from './UserSearch';\nimport Chat from './Chat';\nimport FriendsList from './FriendsList';\nimport api from './api';\n\nfunction App() {\n  const [authUser, setAuthUser] = useState(localStorage.getItem('username'));\n  const [activeChat, setActiveChat] = useState(null);\n  const [onlineUsers, setOnlineUsers] = useState({});\n\n  useEffect(() => {\n    if (!authUser) return;\n    const statusSocket = new WebSocket(`ws://localhost:8000/ws/status/${authUser}/`);\n    statusSocket.onmessage = (e) => {\n      const data = JSON.parse(e.data);\n      setOnlineUsers(prev => ({ ...prev, [data.user]: data.status }));\n    };\n    return () => statusSocket.close();\n  }, [authUser]);\n\n  if (!authUser) return <Login setAuthUser={setAuthUser} />;\n\n  return (\n    <div style={styles.dashboard}>\n      {/* COLUMN 1: NAVIGATION RAIL (Minimalist) */}\n      <motion.nav \n        initial={{ x: -80 }} animate={{ x: 0 }}\n        style={styles.navRail}\n      >\n        <div style={styles.logoBox}>S</div>\n        <div style={styles.navLinks}>\n          <div style={styles.activeIcon}>ðŸ’¬</div>\n          <div style={styles.icon}>ðŸ‘¥</div>\n          <div style={styles.icon}>ðŸ””</div>\n        </div>\n        <button onClick={() => {localStorage.clear(); window.location.reload();}} style={styles.logoutBtn}>\n          Power\n        </button>\n      </motion.nav>\n\n      {/* COLUMN 2: SOCIAL SIDEBAR (Dynamic List) */}\n      <motion.aside \n        initial={{ opacity: 0 }} animate={{ opacity: 1 }}\n        style={styles.sidebar}\n      >\n        <header style={styles.sideHeader}>\n          <h2 style={styles.title}>Messages</h2>\n          <UserSearch onSelectUser={setActiveChat} />\n        </header>\n\n        <div style={styles.friendsContainer}>\n          <FriendsList \n            onSelectUser={setActiveChat} \n            onlineUsers={onlineUsers} \n          />\n        </div>\n      </motion.aside>\n\n      {/* COLUMN 3: CHAT VIEWPORT (Spring Animation) */}\n      <main style={styles.mainView}>\n        <AnimatePresence mode=\"wait\">\n          {activeChat ? (\n            <motion.div \n              key={activeChat.id}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, scale: 0.95 }}\n              transition={{ type: \"spring\", stiffness: 300, damping: 30 }}\n              style={{ height: '100%' }}\n            >\n              <Chat receiverId={activeChat.id} receiverName={activeChat.username} />\n            </motion.div>\n          ) : (\n            <div style={styles.emptyState}>\n              <motion.div \n                animate={{ y: [0, -10, 0] }} \n                transition={{ repeat: Infinity, duration: 4 }}\n                style={styles.emptyIcon}\n              >âœ¨</motion.div>\n              <h3>Pick up where you left off</h3>\n              <p>Select a friend to open a secure encrypted channel.</p>\n            </div>\n          )}\n        </AnimatePresence>\n      </main>\n    </div>\n  );\n}\n\nconst styles = {\n  dashboard: { display: 'flex', height: '100vh', width: '100vw' },\n  navRail: { \n    width: '80px', background: 'var(--bg-surface)', borderRight: '1px solid var(--bg-accent)',\n    display: 'flex', flexDirection: 'column', alignItems: 'center', padding: '25px 0' \n  },\n  logoBox: { \n    width: '45px', height: '45px', background: 'var(--primary)', borderRadius: '14px',\n    display: 'flex', alignItems: 'center', justifyContent: 'center', fontWeight: 'bold',\n    boxShadow: '0 0 20px var(--primary-glow)', marginBottom: '50px'\n  },\n  navLinks: { flex: 1, display: 'flex', flexDirection: 'column', gap: '30px' },\n  activeIcon: { fontSize: '24px', background: 'var(--bg-accent)', padding: '12px', borderRadius: '15px' },\n  icon: { fontSize: '24px', opacity: 0.5, cursor: 'pointer' },\n  sidebar: { \n    width: '360px', background: 'var(--bg-deep)', borderRight: '1px solid var(--bg-accent)',\n    display: 'flex', flexDirection: 'column' \n  },\n  sideHeader: { padding: '30px 25px' },\n  title: { fontSize: '28px', fontWeight: '700', marginBottom: '20px' },\n  friendsContainer: { flex: 1, overflowY: 'auto', padding: '0 15px' },\n  mainView: { flex: 1, position: 'relative', background: 'var(--bg-surface)' },\n  emptyState: { \n    height: '100%', display: 'flex', flexDirection: 'column', alignItems: 'center', \n    justifyContent: 'center', textAlign: 'center', color: 'var(--text-muted)' \n  },\n  emptyIcon: { fontSize: '60px', marginBottom: '20px' },\n  logoutBtn: { border: 'none', background: 'none', color: '#ef4444', fontWeight: 'bold', cursor: 'pointer' }\n};\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}